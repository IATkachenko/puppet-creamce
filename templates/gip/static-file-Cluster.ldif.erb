dn: GlueClusterUniqueID=<%=@ce_host-%>,mds-vo-name=resource,o=grid
objectClass: GlueClusterTop
objectClass: GlueCluster
objectClass: GlueInformationService
objectClass: GlueKey
objectClass: GlueSchemaVersion
GlueClusterUniqueID: <%=@ce_host%>
GlueClusterName: <%=@ce_host%>
GlueForeignKey: GlueSiteUniqueID=<%=@sitename%>
<%@grid_queues.each do | queue, value | -%>
GlueForeignKey: GlueCEUniqueID=<%=@ce_host-%>:<%=@ce_port-%>/<%=@ce_type-%>-<%=@batch_system-%>-<%=queue%>
GlueClusterService: <%=@ce_host-%>:<%=@ce_port-%>/<%=@ce_type-%>-<%=@batch_system-%>-<%=queue%>
<%end-%>
GlueInformationServiceURL: ldap://<%=@fqdn-%>:<%=@info_port-%>/mds-vo-name=<%=@info_type-%>,o=grid
GlueSchemaVersionMajor: 1
GlueSchemaVersionMinor: 3

<%
@subclusters.each do | res_id, res_info |
    ce_cpu_model=res_info["ce_cpu_model"]
    ce_cpu_speed=res_info["ce_cpu_speed"]
    ce_cpu_vendor=res_info["ce_cpu_vendor"]
    ce_inboundip=res_info["ce_inboundip"]
    ce_physcpu=res_info["ce_physcpu"]
    ce_logcpu=res_info["ce_logcpu"]
    ce_minphysmem=res_info["ce_minphysmem"]
    ce_minvirtmem=res_info["ce_minvirtmem"]
    ce_os=res_info["ce_os"]
    ce_os_family=res_info["ce_os_family"]
    ce_os_arch=res_info["ce_os_arch"]
    ce_os_release=res_info["ce_os_release"]
    ce_os_version=res_info["ce_os_version"]
    ce_os_name=res_info["ce_os_name"]
    ce_otherdescr=res_info["ce_otherdescr"]
    ce_outboundip=res_info["ce_outboundip"]
    ce_sf00=res_info["ce_benchmarks"].fetch('specfp2000', nil)
    ce_si00=res_info["ce_benchmarks"].fetch('specint2000', nil)
    ce_smpsize=res_info["ce_smpsize"]
    ce_runtimeenv=res_info["ce_runtimeenv"]
    subcluster_tmpdir=res_info["subcluster_tmpdir"]
    subcluster_wntmdir=res_info["subcluster_wntmdir"]
-%>
dn: GlueSubClusterUniqueID=<%=res_id-%>,GlueClusterUniqueID=<%=@ce_host-%>,mds-vo-name=<%=@info_type-%>,o=grid
objectClass: GlueClusterTop
objectClass: GlueSubCluster
objectClass: GlueHostApplicationSoftware
objectClass: GlueHostArchitecture
objectClass: GlueHostBenchmark
objectClass: GlueHostMainMemory
objectClass: GlueHostNetworkAdapter
objectClass: GlueHostOperatingSystem
objectClass: GlueHostProcessor
objectClass: GlueInformationService
objectClass: GlueKey
objectClass: GlueSchemaVersion
GlueSubClusterUniqueID: <%=res_id%>
GlueChunkKey: GlueClusterUniqueID=<%=@ce_host%>
GlueHostArchitecturePlatformType: <%=ce_os_arch%>
GlueHostArchitectureSMPSize: <%=ce_smpsize%>
<% if ce_sf00 != nil -%>
GlueHostBenchmarkSF00: <%=ce_sf00%>
<% end -%>
<% if ce_si00 != nil -%>
GlueHostBenchmarkSI00: <%=ce_si00%>
<% end -%>
GlueHostMainMemoryRAMSize: <%=ce_minphysmem%>
GlueHostMainMemoryVirtualSize: <%=ce_minvirtmem%>
GlueHostNetworkAdapterInboundIP: <%=ce_inboundip.to_s.upcase%>
GlueHostNetworkAdapterOutboundIP: <%=ce_outboundip.to_s.upcase%>
GlueHostOperatingSystemName: <%=ce_os_name%>
GlueHostOperatingSystemRelease: <%=ce_os_release%>
GlueHostOperatingSystemVersion: <%=ce_os_version%>
GlueHostProcessorClockSpeed: <%=ce_cpu_speed%>
GlueHostProcessorModel: <%=ce_cpu_model%>
GlueHostProcessorVendor: <%=ce_cpu_vendor%>
GlueHostProcessorOtherDescription: <%=ce_otherdescr%>
GlueSubClusterName: <%=@ce_host%>
GlueSubClusterPhysicalCPUs: <%=ce_physcpu%>
GlueSubClusterLogicalCPUs: <%=ce_logcpu%>
GlueSubClusterTmpDir: <%=subcluster_tmpdir%>
GlueSubClusterWNTmpDir: <%=subcluster_wntmdir%>
GlueInformationServiceURL: ldap://<%=@fqdn%>:<%=@info_port-%>/mds-vo-name=<%=@info_type-%>,o=grid
GlueSchemaVersionMajor: 1
GlueSchemaVersionMinor: 3
<%ce_runtimeenv.each do |runtimeenv |-%>
GlueHostApplicationSoftwareRunTimeEnvironment: <%=runtimeenv%>
<%end-%>

<%end-%>
